{"remainingRequest":"E:\\projects\\chat-app\\source\\front\\node_modules\\babel-loader\\lib\\index.js!E:\\projects\\chat-app\\source\\front\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!E:\\projects\\chat-app\\source\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\projects\\chat-app\\source\\front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\projects\\chat-app\\source\\front\\src\\components\\MessageList.vue?vue&type=template&id=7218dcc5","dependencies":[{"path":"E:\\projects\\chat-app\\source\\front\\src\\components\\MessageList.vue","mtime":1627028094261},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiZmxleC0xIG1lc3NhZ2UtYXJlYSIsCiAgcmVmOiAic2Nyb2xsQXJlYSIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAga2V5OiAxCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfTWVzc2FnZSA9IF9yZXNvbHZlQ29tcG9uZW50KCJNZXNzYWdlIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgWyRwcm9wcy5tZXNzYWdlcyAmJiAkcHJvcHMubWVzc2FnZXMubGVuZ3RoID8gKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIHsKICAgIGtleTogMAogIH0sIF9yZW5kZXJMaXN0KCRwcm9wcy5tZXNzYWdlcywgZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X01lc3NhZ2UsIHsKICAgICAga2V5OiBtZXNzYWdlLl9pZCwKICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgbWluZTogbWVzc2FnZS51c2VyLl9pZCA9PSBfY3R4LmdldFVzZXIuX2lkID8gdHJ1ZSA6IGZhbHNlCiAgICB9LCBudWxsLCA4CiAgICAvKiBQUk9QUyAqLwogICAgLCBbIm1lc3NhZ2UiLCAibWluZSJdKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygicCIsIF9ob2lzdGVkXzIsICJUaGVyZSBhcmUgbm8gbWVzc2FnZXMgeWV0IikpXSwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICk7Cn0="},{"version":3,"sources":["E:\\projects\\chat-app\\source\\front\\src\\components\\MessageList.vue"],"names":[],"mappings":";;AACO,EAAA,KAAK,EAAC,qB;AAAsB,EAAA,GAAG,EAAC;;;;;;;;uBAArC,YAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJY,MAAA,CAAA,QAAA,IAAY,MAAA,CAAA,QAAA,CAAS,M,sBACrC,YAAA,CAAgI,SAAhI,EAAgI;AAAA,IAAA,GAAA,EAAA;AAAA,GAAhI,EAAgI,WAAA,CAArG,MAAA,CAAA,QAAqG,EAA7F,UAAnB,OAAmB,EAAZ;yBAAvB,YAAA,CAAgI,kBAAhI,EAAgI;AAA1F,MAAA,GAAG,EAAE,OAAO,CAAC,GAA6E;AAAvE,MAAA,OAAO,EAAE,OAA8D;AAApD,MAAA,IAAI,EAAE,OAAO,CAAC,IAAR,CAAa,GAAb,IAAoB,IAAA,CAAA,OAAA,CAAQ,GAA5B,GAA+B,IAA/B,GAA+B;AAAe,KAAhI,E,IAAA,E;;AAAA,M,mBAAA,C;GAAgI,CAAhI,E;;AAAA,G,mBAEA,YAAA,CAAuC,GAAvC,EAAuC,UAAvC,EAAU,2BAAV,C,CACI,CALN,E;;AAAA,G","sourcesContent":["<template>\r\n  <div class=\"flex-1 message-area\" ref=\"scrollArea\">\r\n    <template v-if=\"messages && messages.length\">\r\n    <Message v-for=\"message in messages\" :key=\"message._id\" :message=\"message\" :mine=\"message.user._id == getUser._id?true:false\" />\r\n    </template>\r\n    <p v-else>There are no messages yet</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport Message from \"@/components/Message.vue\";\r\n\r\nexport default {\r\n  name: \"MessageList\",\r\n  props: ['messages'],\r\n  data: function() {\r\n      return {\r\n          scrollArea: null,\r\n          loaded: false,\r\n          lastCreatedAt: null,\r\n          timeoutScroll: null\r\n      };\r\n  },\r\n  components: {\r\n    Message,\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"getUser\", \"getSocket\", \"getRoom\"])\r\n  },\r\n  methods: {\r\n    scrollToLast() {\r\n      this.scrollArea.scrollTop = this.scrollArea.scrollHeight - this.scrollArea.clientHeight;\r\n    },\r\n    handleScroll(){\r\n      clearTimeout(this.timeoutScroll);\r\n      if(this.scrollArea.scrollTop < 20 && this.scrollArea.scrollHeight - this.scrollArea.clientHeight > 0){\r\n        this.timeoutScroll = setTimeout(() => {\r\n            this.getSocket.emit('loadMoreMessage', {\r\n              roomId: this.getRoom._id,\r\n              lastCreatedAt: this.lastCreatedAt\r\n            });\r\n        }, 1000);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.scrollArea = this.$refs.scrollArea;\r\n    this.scrollToLast();\r\n    this.scrollArea.addEventListener('scroll', this.handleScroll);\r\n  },\r\n  updated() {\r\n    if((this.scrollArea.scrollHeight - this.scrollArea.clientHeight)-this.scrollArea.scrollTop < 200 || !this.loaded) this.scrollToLast();\r\n    this.loaded = true;\r\n    if(this.messages.length) this.lastCreatedAt = this.messages[0].createdAt;\r\n  },\r\n  unmounted () {\r\n    this.scrollArea.removeEventListener('scroll', this.handleScroll);\r\n  },\r\n};\r\n</script>"],"sourceRoot":""}]}