{"remainingRequest":"E:\\projects\\chat-app\\vue-pwa-tutorial\\node_modules\\babel-loader\\lib\\index.js!E:\\projects\\chat-app\\vue-pwa-tutorial\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\projects\\chat-app\\vue-pwa-tutorial\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\projects\\chat-app\\vue-pwa-tutorial\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\projects\\chat-app\\vue-pwa-tutorial\\src\\views\\Login.vue","mtime":1627017974896},{"path":"E:\\projects\\chat-app\\vue-pwa-tutorial\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\vue-pwa-tutorial\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\projects\\chat-app\\vue-pwa-tutorial\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\vue-pwa-tutorial\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovcHJvamVjdHMvY2hhdC1hcHAvdnVlLXB3YS10dXRvcmlhbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAnJywKICAgICAgcm9vbUlkOiAnJywKICAgICAgdG9rZW46ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydnZXRVc2VyJywgJ2dldFJvb20nLCAnZ2V0U2VydmVyVXJsJ10pKSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuZ2V0VXNlcikgewogICAgICB0aGlzLm5hbWUgPSB0aGlzLmdldFVzZXIubmFtZTsKICAgICAgdGhpcy50b2tlbiA9IHRoaXMuZ2V0VXNlci50b2tlbjsKICAgIH0KCiAgICBpZiAodGhpcy5nZXRSb29tKSB7CiAgICAgIHRoaXMucm9vbUlkID0gdGhpcy5nZXRSb29tLmlkOwogICAgfQogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnc2V0VXNlcicsICdzZXRBdXRoJywgJ3NldFJvb20nXSkpLCB7fSwgewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubmFtZSAmJiB0aGlzLnJvb21JZCkgewogICAgICAgIGF4aW9zLnBvc3QodGhpcy5nZXRTZXJ2ZXJVcmwgKyAnL2FwaS9qb2luLXJvb20nLCB7CiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgICByb29tSWQ6IHRoaXMucm9vbUlkLAogICAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5tc2cpIHsKICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRTaG93TW9kZWwnLCB0cnVlKTsKCiAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0TWVzc2FnZU1vZGVsJywgcmVzLmRhdGEubXNnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0QXV0aCcsIHRydWUpOwoKICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRVc2VyJywgcmVzLmRhdGEudXNlcik7CgogICAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFJvb20nLCByZXMuZGF0YS5yb29tKTsKCiAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogJ0NoYXRSb29tJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0U2hvd01vZGVsJywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldE1lc3NhZ2VNb2RlbCcsICJVc2VybmFtZSBvciBSb29tSUQgY2Fubid0IGVtcHR5ISIpOwogICAgICB9CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["E:\\projects\\chat-app\\vue-pwa-tutorial\\src\\views\\Login.vue"],"names":[],"mappings":";;AAcA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AACA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAEb,EAAA,IAAI,EAAE,gBAAW;AACb,WAAO;AACH,MAAA,IAAI,EAAE,EADH;AAEH,MAAA,MAAM,EAAE,EAFL;AAGH,MAAA,KAAK,EAAE;AAHJ,KAAP;AAKH,GARY;AASb,EAAA,QAAQ,oBACD,UAAU,CAAC,CAAC,SAAD,EAAY,SAAZ,EAAuB,cAAvB,CAAD,CADT,CATK;AAYb,EAAA,OAZa,qBAYH;AACR,QAAG,KAAK,OAAR,EAAgB;AACd,WAAK,IAAL,GAAY,KAAK,OAAL,CAAa,IAAzB;AACA,WAAK,KAAL,GAAa,KAAK,OAAL,CAAa,KAA1B;AACF;;AACA,QAAG,KAAK,OAAR,EAAgB;AACd,WAAK,MAAL,GAAc,KAAK,OAAL,CAAa,EAA3B;AACF;AACD,GApBY;AAqBb,EAAA,OAAO,kCACF,UAAU,CAAC,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,CAAD,CADR;AAEL,IAAA,KAFK,mBAEG;AAAA;;AACN,UAAI,KAAK,IAAL,IAAa,KAAK,MAAtB,EAA8B;AAC1B,QAAA,KAAK,CAAC,IAAN,CAAW,KAAK,YAAL,GAAoB,gBAA/B,EAAiD;AAC/C,UAAA,IAAI,EAAE,KAAK,IADoC;AAE/C,UAAA,MAAM,EAAE,KAAK,MAFkC;AAG/C,UAAA,KAAK,EAAE,KAAK;AAHmC,SAAjD,EAIG,IAJH,CAIQ,UAAA,GAAE,EAAK;AACb,cAAI,GAAG,CAAC,IAAJ,CAAS,GAAb,EAAkB;AAChB,YAAA,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,cAArB,EAAqC,IAArC;;AACA,YAAA,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,iBAArB,EAAwC,GAAG,CAAC,IAAJ,CAAS,GAAjD;AACF,WAHA,MAGO;AACL,YAAA,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,SAArB,EAAgC,IAAhC;;AACA,YAAA,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,SAArB,EAAgC,GAAG,CAAC,IAAJ,CAAS,IAAzC;;AACA,YAAA,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,SAArB,EAAgC,GAAG,CAAC,IAAJ,CAAS,IAAzC;;AACA,YAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AACd,cAAA,IAAI,EAAE;AADQ,aAAlB;AAGF;AACD,SAhBD;AAiBJ,OAlBA,MAkBO;AACL,aAAK,MAAL,CAAY,QAAZ,CAAqB,cAArB,EAAqC,IAArC;AACA,aAAK,MAAL,CAAY,QAAZ,CAAqB,iBAArB,EAAwC,kCAAxC;AACF;AACF;AAzBK;AArBM,CAAf","sourcesContent":["<template>\n  <div>\n    <form @submit.prevent=\"login\" class=\"login-area\">\n      <div class=\"flex-1\">\n        <h1>Join Chatroom</h1>\n        <input type=\"text\" class=\"form-input\" placeholder=\"Username\" v-model.trim=\"name\" name=\"name\">\n        <input type=\"text\" class=\"form-input\" placeholder=\"RoomID\" v-model.trim=\"roomId\" name=\"roomId\">\n      </div>\n      <button type=\"submit\" class=\"join-btn\">Join</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n  name: 'Login',\n  data: function() {\n      return {\n          name: '',\n          roomId: '',\n          token: ''\n      };\n  },\n  computed: {\n      ...mapGetters(['getUser', 'getRoom', 'getServerUrl'])\n  },\n  created() {\n    if(this.getUser){\n      this.name = this.getUser.name\n      this.token = this.getUser.token\n    }\n    if(this.getRoom){\n      this.roomId = this.getRoom.id\n    }\n  },\n  methods: {\n    ...mapActions(['setUser', 'setAuth', 'setRoom']),\n    login() {\n      if (this.name && this.roomId) {\n          axios.post(this.getServerUrl + '/api/join-room', {\n            name: this.name,\n            roomId: this.roomId,\n            token: this.token\n          }).then(res => {\n            if (res.data.msg) {\n              this.$store.dispatch('setShowModel', true);\n              this.$store.dispatch('setMessageModel', res.data.msg);\n            } else {\n              this.$store.dispatch('setAuth', true);\n              this.$store.dispatch('setUser', res.data.user);\n              this.$store.dispatch('setRoom', res.data.room);\n              this.$router.push({\n                  name: 'ChatRoom'\n              });\n            }\n          });\n      } else {\n        this.$store.dispatch('setShowModel', true);\n        this.$store.dispatch('setMessageModel', \"Username or RoomID cann't empty!\");\n      }\n    }\n  }\n}\n</script>\n<style scoped>\n  .login-area{\n    padding-left: 16px;\n    padding-right: 16px;\n    height: calc(100vh - 60px);\n    display: flex;\n    flex-direction: column;\n  }\n  .login-area .flex-1{\n    flex: 1;\n  }\n  .login-area h1 {\n    font-weight: 600;\n    font-size: 30px;\n    line-height: 36px;\n    color: #000000;\n    margin-bottom: 32px;\n  }\n  .login-area input.form-input {\n    background: #f6f6f6;\n    border: 1px solid #e8e8e8;\n    box-sizing: border-box;\n    border-radius: 8px;\n    width: 100%;\n    height: 50px;\n    padding: 16px;\n    margin-bottom: 16px;\n  }\n  .login-area .join-btn{\n    text-transform: uppercase;\n    margin-bottom: 60px;\n    height: 50px;\n    background: #5DB075;\n    border-radius: 100px;\n    padding: 16px 32px;\n    color: #ffffff;\n    font-weight: 600;\n    font-size: 16px;\n    border: 0;\n    cursor: pointer;\n  }\n  .login-area .join-btn:hover{\n    opacity: 0.8;\n  }\n</style>"],"sourceRoot":""}]}