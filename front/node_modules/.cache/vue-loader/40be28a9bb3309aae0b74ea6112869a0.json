{"remainingRequest":"E:\\projects\\chat-app\\source\\front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\projects\\chat-app\\source\\front\\src\\components\\MessageList.vue?vue&type=template&id=cf31bfb8","dependencies":[{"path":"E:\\projects\\chat-app\\source\\front\\src\\components\\MessageList.vue","mtime":1627028094261},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\projects\\chat-app\\source\\front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgY2xhc3M9ImZsZXgtMSBtZXNzYWdlLWFyZWEiIHJlZj0ic2Nyb2xsQXJlYSI+DQogICAgPHRlbXBsYXRlIHYtaWY9Im1lc3NhZ2VzICYmIG1lc3NhZ2VzLmxlbmd0aCI+DQogICAgPE1lc3NhZ2Ugdi1mb3I9Im1lc3NhZ2UgaW4gbWVzc2FnZXMiIDprZXk9Im1lc3NhZ2UuX2lkIiA6bWVzc2FnZT0ibWVzc2FnZSIgOm1pbmU9Im1lc3NhZ2UudXNlci5faWQgPT0gZ2V0VXNlci5faWQ/dHJ1ZTpmYWxzZSIgLz4NCiAgICA8L3RlbXBsYXRlPg0KICAgIDxwIHYtZWxzZT5UaGVyZSBhcmUgbm8gbWVzc2FnZXMgeWV0PC9wPg0KICA8L2Rpdj4NCg=="},{"version":3,"sources":["E:\\projects\\chat-app\\source\\front\\src\\components\\MessageList.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAC/H,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACxC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"E:/projects/chat-app/source/front/src/components/MessageList.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"flex-1 message-area\" ref=\"scrollArea\">\r\n    <template v-if=\"messages && messages.length\">\r\n    <Message v-for=\"message in messages\" :key=\"message._id\" :message=\"message\" :mine=\"message.user._id == getUser._id?true:false\" />\r\n    </template>\r\n    <p v-else>There are no messages yet</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport Message from \"@/components/Message.vue\";\r\n\r\nexport default {\r\n  name: \"MessageList\",\r\n  props: ['messages'],\r\n  data: function() {\r\n      return {\r\n          scrollArea: null,\r\n          loaded: false,\r\n          lastCreatedAt: null,\r\n          timeoutScroll: null\r\n      };\r\n  },\r\n  components: {\r\n    Message,\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"getUser\", \"getSocket\", \"getRoom\"])\r\n  },\r\n  methods: {\r\n    scrollToLast() {\r\n      this.scrollArea.scrollTop = this.scrollArea.scrollHeight - this.scrollArea.clientHeight;\r\n    },\r\n    handleScroll(){\r\n      clearTimeout(this.timeoutScroll);\r\n      if(this.scrollArea.scrollTop < 20 && this.scrollArea.scrollHeight - this.scrollArea.clientHeight > 0){\r\n        this.timeoutScroll = setTimeout(() => {\r\n            this.getSocket.emit('loadMoreMessage', {\r\n              roomId: this.getRoom._id,\r\n              lastCreatedAt: this.lastCreatedAt\r\n            });\r\n        }, 1000);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.scrollArea = this.$refs.scrollArea;\r\n    this.scrollToLast();\r\n    this.scrollArea.addEventListener('scroll', this.handleScroll);\r\n  },\r\n  updated() {\r\n    if((this.scrollArea.scrollHeight - this.scrollArea.clientHeight)-this.scrollArea.scrollTop < 200 || !this.loaded) this.scrollToLast();\r\n    this.loaded = true;\r\n    if(this.messages.length) this.lastCreatedAt = this.messages[0].createdAt;\r\n  },\r\n  unmounted () {\r\n    this.scrollArea.removeEventListener('scroll', this.handleScroll);\r\n  },\r\n};\r\n</script>"]}]}